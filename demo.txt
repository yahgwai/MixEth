1 deploy new mixeth with lower timeouts
2 View testVectorsForChaumPedersen.txt



1. BEFORE DEMO: Add S2, S3 to MixEth

1a) Name S1 sender and R1 receiver
2. S1 calls depositEther (need to generate x and y - with keygen.js)
3. S1 creates a shuffle offline with shuffle/shuffle_generation.js
    a) Find R2, R3 by viewing the latest "uploadShuffle" in the events tab of etherscan
    b) Ask R1 to multiply r1 * A (shuffle accumulated constant) to form R1*
    c) Pass the array [ R1*, R2, R3] and A to shuffle_generation:
        "node shuffle_generation.js shuffleGenerator A [R1*, R2, R3]"
    d) Output is [ shuffledPubKeys ] and new accumulated constant
4. Pass the output from d (and oldShuffle) to uploadShuffle
5. Wait for timeout
6. R1 now needs to create a modified ECDSA shuffle_generation
    a) create the messageHash = "abi.encodePacked(msg.sender, sig[2], sig[3])" where [2] and [3] are the public key coords of R1
    b) "node ecdsa/sign.js sign <currentAccumulatedConstant> <privKeyForR1> <messageHash> (of public keys from shuffle)"
    c) take the output from ecdsa/sign.js and pass to ecdsa/verify.js to create the correct output for withdraw
        i) with the following <currentAccumulatedConstant> <public key from sign> <messageHash> (of public keys from shuffle) r s
    d) pass the output to "withdrawAmt([
        uint256 Gx, uint256 Gy, uint256 pKx, uint256 pKy,
        uint256 msgHash, uint256 r, uint256 s,
        uint256 u1Gx, uint256 u1Gy, uint256 u2pKx, uint256 u2pKy,
        uint256 w
    ])"
7. Check the value has been received

//priv
446adfbdd521997c8f3010f488efc919073d6ed0c02831e350c010ee22187ffc
// pub
abbaeb097339f955080a8d48ba8a655721d5e90fe46973258bbae8063c3e868c
904d7734e3a46adf73be2d2a31decf9f49f370fa6bcf1c18cb6e8c1f59cfc736
// shuffled pub key
bcb4f7d0305cb0b3ff2bd220ddfb3cd8f4a877705fdef2b06d8dcdce651ddb88
4eaa5cb3d1b06b504ad04d90c83a02d76c144416686df32f742c60cbdfe59dd3
// current accumulated constant
def7b7362169be33e5c76746c0aa0a70dd24cf51ba8420e1f93b93e0f4d76f17
4d5a3179f526729085cafac7d4dad086ac99f557a1c14519b6b104474c09782e
// msgHash
6dc5f5fa83b9931c83fffbc92d8027e061f572b14a49b9eab76b06570a09ac4b
// r
66e69eb7e46b066c7fc41d1fb18b29e90a92bdfdc3deff9d5c184bae5d013c56
// s
eb75e3f2381e4c41b986aa743c8c4427401ede4634c2e88e4f11a3139e4f1aeb
// withdraw
[ "0xdef7b7362169be33e5c76746c0aa0a70dd24cf51ba8420e1f93b93e0f4d76f17",
  "0x4d5a3179f526729085cafac7d4dad086ac99f557a1c14519b6b104474c09782e",
  "0xbcb4f7d0305cb0b3ff2bd220ddfb3cd8f4a877705fdef2b06d8dcdce651ddb88",
  "0x4eaa5cb3d1b06b504ad04d90c83a02d76c144416686df32f742c60cbdfe59dd3",
  "0x6dc5f5fa83b9931c83fffbc92d8027e061f572b14a49b9eab76b06570a09ac4b",
  "0x66e69eb7e46b066c7fc41d1fb18b29e90a92bdfdc3deff9d5c184bae5d013c56",
  "0xeb75e3f2381e4c41b986aa743c8c4427401ede4634c2e88e4f11a3139e4f1aeb",
  "0x8d39d6973cb7b4146d6dec41afbd1ccc25f6ed254b878a5b886c8e98d55b9a5c",
  "0xf9d42d13196bc1528710c0bc905fd349b589b8ab5d589d45ae2a484c00a7845f",
  "0x59967ac6dcee787966941c20eeab241c4db7c1d173b98d0040b59982f6248dba",
  "0x947321e056a1638ae9ec773ba96b02a3dd2de0ec3375c4040d2cf79792cb00ed",
  "0x89618ad66773e3396f80a08738f764abd7ed460e70c8683b7b3a74cae26f0056" ]



// working solo args for ganache account[0] sends to account[0]
////////////////////////////////////////////////////////////////////////
"0xabbaeb097339f955080a8d48ba8a655721d5e90fe46973258bbae8063c3e868c","0x904d7734e3a46adf73be2d2a31decf9f49f370fa6bcf1c18cb6e8c1f59cfc736"
"0x0000000000000000000000000000000000000000",[],["0xbcb4f7d0305cb0b3ff2bd220ddfb3cd8f4a877705fdef2b06d8dcdce651ddb88","0x4eaa5cb3d1b06b504ad04d90c83a02d76c144416686df32f742c60cbdfe59dd3"],["0xdef7b7362169be33e5c76746c0aa0a70dd24cf51ba8420e1f93b93e0f4d76f17","0x4d5a3179f526729085cafac7d4dad086ac99f557a1c14519b6b104474c09782e"]
["0xdef7b7362169be33e5c76746c0aa0a70dd24cf51ba8420e1f93b93e0f4d76f17","0x4d5a3179f526729085cafac7d4dad086ac99f557a1c14519b6b104474c09782e","0xbcb4f7d0305cb0b3ff2bd220ddfb3cd8f4a877705fdef2b06d8dcdce651ddb88","0x4eaa5cb3d1b06b504ad04d90c83a02d76c144416686df32f742c60cbdfe59dd3","0x6dc5f5fa83b9931c83fffbc92d8027e061f572b14a49b9eab76b06570a09ac4b","0x66e69eb7e46b066c7fc41d1fb18b29e90a92bdfdc3deff9d5c184bae5d013c56","0xeb75e3f2381e4c41b986aa743c8c4427401ede4634c2e88e4f11a3139e4f1aeb","0x8d39d6973cb7b4146d6dec41afbd1ccc25f6ed254b878a5b886c8e98d55b9a5c","0xf9d42d13196bc1528710c0bc905fd349b589b8ab5d589d45ae2a484c00a7845f","0x59967ac6dcee787966941c20eeab241c4db7c1d173b98d0040b59982f6248dba","0x947321e056a1638ae9ec773ba96b02a3dd2de0ec3375c4040d2cf79792cb00ed","0x89618ad66773e3396f80a08738f764abd7ed460e70c8683b7b3a74cae26f0056"]


////////////////////////////////////////////////////////////////////////



// demo location
//////////////////// 0x9f254E6e2b19c2B945e6e405585AD81DcB01F8C2

// priv
"54D62F15C88D071C99BA00B8290BDB4F1B84AC627312135B242DD12ADD292B0A"

// priv 2
"446adfbdd521997c8f3010f488efc919073d6ed0c02831e350c010ee22187ffc"

// public
74e973b368b30403a5b8ab49c3bd4675351f01e627d97e9ca84c3501e27c5299
9b6451310486fc03431815735619661c891708ff94d1b61b302f18a4e0a2598d
["0x74e973b368b30403a5b8ab49c3bd4675351f01e627d97e9ca84c3501e27c5299","0x9b6451310486fc03431815735619661c891708ff94d1b61b302f18a4e0a2598d"]

// public 2
abbaeb097339f955080a8d48ba8a655721d5e90fe46973258bbae8063c3e868c
904d7734e3a46adf73be2d2a31decf9f49f370fa6bcf1c18cb6e8c1f59cfc736



////////////////////////////////////////////////////


base shuffleGenerator
79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798
483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8
["0x79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","0x483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8"]


ether token address
0x0000000000000000000000000000000000000000

8. (Shuffler can the call withdrawDeposit as well)


oldshufle
["d3b0b6d59fdd841d28821171aa912d625169d58fac04592b239bcab9b84082ee",
"99f88955859c34dc7c2cbe0ce423ded7e1d2302fc279be3f805f71dde7eca582",
"f924738fbaebf80ca5a0d1d6cc33856be448c0e60670c64f73aeac0000925808",
"e392c39c052599470fea0142bea6add7cceb5a2f99423bb45320d35f083d4f60",
"6c709bf8f273b07791824b08e1b99ece69c0fb5fbdcfe7c1150b0ccd7a816c54",
"21753728d8b3028f041a71eee89c7424a870c2ff8da41350cc15ef397df0d373",
"23c239f04c5ac9c411379b1a3570b68526dd5d47888cdcb7caf874ff3aeab499",
"3dd81fbd6a7907275b0ce68b9261ec8a5520b6587bb7cbd33d26d72a0d917f47",
"d0cc696065a9bd1f4fc83259d13ebd05a19ef97ac3440b78012405627623d672",
"f5b9894c4032a9b607c4f10ce706cf73803416d14e8c14f222d7ad0c62e544d4"]

// shuffle accumulated constant
"04a25126710efb86866b63ffab6539e791c76e08f332618bd3fff7d0b1fcd68fd8ac55f34cd8a4e188f9629d8546ed7025036a61c5407b129cc8376e3570c7d296"
"04a25126710efb86866b63ffab6539e791c76e08f332618bd3fff7d0b1fcd68fd8ac55f34cd8a4e188f9629d8546ed7025036a61c5407b129cc8376e3570c7d296"

// new shuffle
[    "d3b0b6d59fdd841d28821171aa912d625169d58fac04592b239bcab9b84082ee99f88955859c34dc7c2cbe0ce423ded7e1d2302fc279be3f805f71dde7eca582",    "f924738fbaebf80ca5a0d1d6cc33856be448c0e60670c64f73aeac0000925808e392c39c052599470fea0142bea6add7cceb5a2f99423bb45320d35f083d4f60",   "6c709bf8f273b07791824b08e1b99ece69c0fb5fbdcfe7c1150b0ccd7a816c5421753728d8b3028f041a71eee89c7424a870c2ff8da41350cc15ef397df0d373",    "23c239f04c5ac9c411379b1a3570b68526dd5d47888cdcb7caf874ff3aeab4993dd81fbd6a7907275b0ce68b9261ec8a5520b6587bb7cbd33d26d72a0d917f47",    "04d0cc696065a9bd1f4fc83259d13ebd05a19ef97ac3440b78012405627623d672f5b9894c4032a9b607c4f10ce706cf73803416d14e8c14f222d7ad0c62e544d4", "7f1976d24fb57700292b94e8c2e9e02fc6eaafa6078cfdbf9cb143e100e68d05222689103545dfddcf38ebd7df5bb77ce9b04add1b7f1e1c56fbc3d3a3ee8832"]
[
    "d3b0b6d59fdd841d28821171aa912d625169d58fac04592b239bcab9b84082ee",
    "99f88955859c34dc7c2cbe0ce423ded7e1d2302fc279be3f805f71dde7eca582",
    "f924738fbaebf80ca5a0d1d6cc33856be448c0e60670c64f73aeac0000925808",
    "e392c39c052599470fea0142bea6add7cceb5a2f99423bb45320d35f083d4f60",
    "6c709bf8f273b07791824b08e1b99ece69c0fb5fbdcfe7c1150b0ccd7a816c54",
    "21753728d8b3028f041a71eee89c7424a870c2ff8da41350cc15ef397df0d373",
    "23c239f04c5ac9c411379b1a3570b68526dd5d47888cdcb7caf874ff3aeab499",
    "3dd81fbd6a7907275b0ce68b9261ec8a5520b6587bb7cbd33d26d72a0d917f47",
    "d0cc696065a9bd1f4fc83259d13ebd05a19ef97ac3440b78012405627623d672",
    "f5b9894c4032a9b607c4f10ce706cf73803416d14e8c14f222d7ad0c62e544d4"

    "7f1976d24fb57700292b94e8c2e9e02fc6eaafa6078cfdbf9cb143e100e68d05",
    "222689103545dfddcf38ebd7df5bb77ce9b04add1b7f1e1c56fbc3d3a3ee8832"]




// remix jvm priv keys
'3cd7232cd6f3fc66a57a6bedc1a8ed6c228fff0a327e169c2bcc5e869ed49511',
06cc661590d48ee972944b35ad13ff03c7876eae3fd191e8a2f77311b0a3c661
3407b5005e63d7d8d76b89d5f900cde691497688bb281e07a5052ff61edebdc0

'2ac6c190b09897cd8987869cc7b918cfea07ee82038d492abce033c75c1b1d0c'
1f5ef7f4274c84fa84fdd413e9cb69d06e0bce762f8b8f4028b288451edd450a
79927a3e8951172c662c4c1b252cd1209c8cef992dccff72a1a4647ce3bea82f

'dae9801649ba2d95a21e688b56f77905e5667c44ce868ec83f82e838712a2c7a'
7df3cf7c231b39ead5d1de1e2338c2e12903845103bfc48c619f9dc55d46d8bd
2bf9c15ff897b84a9742905e1140073ee4b35ef75195835b4582973eab5a05bf

'd74aa6d18aa79a05f3473dd030a97d3305737cbc8337d940344345c1f6b72eea'
4bfe3f5ae062531c8c46fa441c43fc24c817301207730cd87d07cd79f969d608
16aed91c7f91c83bb8e2cede908459c1e047b7f1ca690897cbb4a6f4e7911ae6

'71975fbf7fe448e004ac7ae54cad0a383c3906055a65468714156a07385e96ce'
17236bd208c9bb28017c6587183cbea085635367c43f53bc07d4a146a9614b89
b19f3d1c73ecf3b87084dc510f2061ccccbdae7c7791331ed8e1a32c4a665576

// upload shuffle
// token address
0x0000000000000000000000000000000000000000

// base generator
79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798
483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8
79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8


node shuffle/shuffle_generation.js shuffleGenerator 04A "key1,key2,key3"
node ecdsa/sign.js signAndVerify 04A priv 04pub hash r s